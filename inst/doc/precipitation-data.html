<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Jeffrey D. Walker, PhD" />

<meta name="date" content="2016-02-16" />

<title>Loading and Analyzing Precipitation Data</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0A%7D%0Apre%20%7B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">Loading and Analyzing Precipitation Data</h1>
<h4 class="author"><em>Jeffrey D. Walker, PhD</em></h4>
<h4 class="date"><em>2016-02-16</em></h4>
</div>


<p>The <code>myrwaR</code> package includes functions for loading and analyzing precipitation data. First, load the packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(myrwaR)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(lubridate)
<span class="kw">library</span>(ggplot2)
<span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())</code></pre></div>
<div id="loading-precipitation-data" class="section level1">
<h1>Loading Precipitation Data</h1>
<div id="loading-precipitation-data-from-excel-file" class="section level2">
<h2>Loading Precipitation Data from Excel File</h2>
<p>To load a precipitation dataset from an Excel file, use the <code>load_precip_from_xls()</code> function. This function takes a number of additional arguments such as the name of the workbook sheet, the timezone of the datetimes, and the names of the datetime and precipitation value columns. The defaults for these arguments are based on MyRWA’s current <code>LocationPrecip.xlsx</code> file. See <code>?load_precip_from_xls</code> for details.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get path to example precip file provided within myrwaR package</span>
<span class="co"># this is a truncated version of the official MyRWA precipitation file</span>
xls_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;LoganPrecip.xlsx&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;myrwaR&quot;</span>)
prcp &lt;-<span class="st"> </span><span class="kw">load_precip_from_xls</span>(<span class="dt">path =</span> xls_path, <span class="dt">as.type =</span> <span class="st">&quot;dataframe&quot;</span>)
<span class="kw">str</span>(prcp)</code></pre></div>
<pre><code>#&gt; Classes 'tbl_df' and 'data.frame':   170928 obs. of  2 variables:
#&gt;  $ Datetime: POSIXct, format: &quot;1996-07-02 00:00:00&quot; &quot;1996-07-02 01:00:00&quot; ...
#&gt;  $ Precip  : num  0 0 0 0 0 0 0 0 0 0 ...</code></pre>
<div id="returning-a-zoo-object" class="section level3">
<h3>Returning a zoo Object</h3>
<p>The precipitation timeseries can also be returned as a <code>zoo</code> object (see the <a href="http://cran.r-project.org/web/packages/zoo/index.html">zoo package</a> for details). A zoo object is designed to handle timeseries data better than a dataframe. However, it does take some time to learn how to use the package effectively.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_zoo &lt;-<span class="st"> </span><span class="kw">load_precip_from_xls</span>(<span class="dt">path =</span> xls_path, <span class="dt">as.type =</span> <span class="st">&quot;zoo&quot;</span>)
<span class="kw">str</span>(prcp_zoo)</code></pre></div>
<pre><code>#&gt; 'zoo' series from 1996-07-02 to 2015-12-31 23:00:00
#&gt;   Data: num [1:170928] 0 0 0 0 0 0 0 0 0 0 ...
#&gt;   Index:  POSIXct[1:170928], format: &quot;1996-07-02 00:00:00&quot; &quot;1996-07-02 01:00:00&quot; ...</code></pre>
</div>
</div>
<div id="loading-precipitation-data-from-usgs-nwis" class="section level2">
<h2>Loading Precipitation Data from USGS NWIS</h2>
<p>Precipitation data can also be loaded from the USGS NWIS system using the <code>load_precip_from_usgs()</code> function. The default station for this function is the Aberjona River gage (01102500).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_usgs &lt;-<span class="st"> </span><span class="kw">load_precip_from_usgs</span>(<span class="dt">start_date=</span><span class="st">&quot;2015-01-01&quot;</span>, <span class="dt">end_date=</span><span class="st">&quot;2015-01-10&quot;</span>, <span class="dt">station_id=</span><span class="st">&quot;01102500&quot;</span>)
<span class="kw">str</span>(prcp_usgs)</code></pre></div>
<pre><code>#&gt; 'data.frame':    240 obs. of  2 variables:
#&gt;  $ Datetime: POSIXct, format: &quot;2015-01-01 00:00:00&quot; &quot;2015-01-01 01:00:00&quot; ...
#&gt;  $ Precip  : num  0 0 0 0 0 0 0 0 0 0 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(prcp_usgs, <span class="dt">PrecipCumsum =</span> <span class="kw">cumsum</span>(Precip)) %&gt;%
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Datetime)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip, <span class="dt">color=</span><span class="st">&quot;Precip&quot;</span>)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>PrecipCumsum, <span class="dt">color=</span><span class="st">&quot;PrecipCumsum&quot;</span>)) +
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="st">''</span>, <span class="dt">values=</span><span class="kw">c</span>(<span class="dt">Precip=</span><span class="st">&quot;steelblue&quot;</span>, <span class="dt">PrecipCumsum=</span><span class="st">&quot;orangered&quot;</span>),
                     <span class="dt">labels=</span><span class="kw">c</span>(<span class="dt">Precip=</span><span class="st">&quot;Hourly Precip&quot;</span>, <span class="dt">PrecipCumsum=</span><span class="st">&quot;Cumulative Precip&quot;</span>)) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),
        <span class="dt">legend.justification=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</code></pre></div>
<p><img src="data:image/png;base64,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" /></p>
</div>
</div>
<div id="antecedent-precipitation" class="section level1">
<h1>Antecedent Precipitation</h1>
<p>Antecedent precipitation is a useful variable for analyzing water quality data. The <code>antecedent_precip()</code> function computes antecedent precipitation based on an hourly timeseries and a specified duration (e.g. 48-hour). The function returns a numeric vector of the same length as the original precipitation. Note that the first <code>n-1</code> elements will be <code>NA</code>, since there are insufficient values available to compute the full antecedent precipitation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ante_prcp &lt;-<span class="st"> </span><span class="kw">antecedent_precip</span>(prcp, <span class="dt">period =</span> <span class="dv">48</span>)
<span class="kw">summary</span>(ante_prcp)</code></pre></div>
<pre><code>#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
#&gt;   0.000   0.000   0.010   0.245   0.250  50.050      47</code></pre>
<p>The function also checks that the input timeseries is continuous and at an hourly timestep. If there are any gaps, duplicated datetimes, or <code>NA</code> values, then the function will throw and error. For example, if the 100th row of <code>prcp</code> is removed`:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">antecedent_precip</span>(prcp[-<span class="dv">100</span>, ], <span class="dt">period =</span> <span class="dv">48</span>)</code></pre></div>
<pre><code>#&gt; Timeseries is not regular, check timesteps around 1996-07-06 02:00:00 (index 99)</code></pre>
<pre><code>#&gt; Error in antecedent_precip(prcp[-100, ], period = 48): Timeseries is not regular</code></pre>
<p>To create a data frame containing multiple antecedent precipitation columns, just save the result <code>antecedent_precip()</code> to new columns in the original data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp$Precip24 &lt;-<span class="st"> </span><span class="kw">antecedent_precip</span>(prcp, <span class="dt">period =</span> <span class="dv">24</span>)
prcp$Precip48 &lt;-<span class="st"> </span><span class="kw">antecedent_precip</span>(prcp, <span class="dt">period =</span> <span class="dv">48</span>)</code></pre></div>
<p>A delay can also be set for the antecedent precipitation, which shifts the period by some number of hours. For example, to get the 48 hours with a delay of 6 hours:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp$Precip48<span class="fl">.6</span> &lt;-<span class="st"> </span><span class="kw">antecedent_precip</span>(prcp, <span class="dt">period =</span> <span class="dv">48</span>, <span class="dt">delay =</span> <span class="dv">6</span>)</code></pre></div>
<p>And finally, we can change the aggregation function to view other statistics of antecedent precipitation. For exmple, to see the maximum intensity over the previous 24 hours:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp$Precip24.max &lt;-<span class="st"> </span><span class="kw">antecedent_precip</span>(prcp, <span class="dt">period =</span> <span class="dv">24</span>, <span class="dt">fun =</span> max)</code></pre></div>
<p>This figure shows the historical hourly (black), 24-hour antecedent sum (solid red) and maximum intensity (dashed red), 48-hour antecedent sum (blue), and 48-hour antecedent sum with 6 hour delay (green) precipitation over 30 days of the timeseries.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(prcp[(<span class="dv">24</span>*<span class="dv">15</span>):(<span class="dv">24</span>*<span class="dv">30</span>), ], <span class="kw">aes</span>(Datetime)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip, <span class="dt">color=</span><span class="st">&quot;Precip&quot;</span>)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip24, <span class="dt">color=</span><span class="st">&quot;Precip24&quot;</span>)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip24.max, <span class="dt">color=</span><span class="st">&quot;Precip24.max&quot;</span>)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip48, <span class="dt">color=</span><span class="st">&quot;Precip48&quot;</span>)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip48<span class="fl">.6</span>, <span class="dt">color=</span><span class="st">&quot;Precip48.6&quot;</span>)) +
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="ot">NULL</span>,
                     <span class="dt">labels=</span><span class="kw">c</span>(<span class="dt">Precip=</span><span class="st">&quot;Hourly Precip&quot;</span>,
                              <span class="dt">Precip24=</span><span class="st">&quot;24-hr Total Precip&quot;</span>, <span class="dt">Precip24.max=</span><span class="st">&quot;24-hr Max Precip&quot;</span>,
                              <span class="dt">Precip48=</span><span class="st">&quot;48-hr Total Precip&quot;</span>, <span class="dt">Precip48.6=</span><span class="st">&quot;48-hour Total Precip (6-hr Delay)&quot;</span>),
                     <span class="dt">values=</span><span class="kw">c</span>(<span class="dt">Precip=</span><span class="st">&quot;black&quot;</span>,
                              <span class="dt">Precip24=</span><span class="st">&quot;red&quot;</span>, <span class="dt">Precip24.max=</span><span class="st">&quot;orange&quot;</span>,
                              <span class="dt">Precip48=</span><span class="st">&quot;deepskyblue&quot;</span>, <span class="dt">Precip48.6=</span><span class="st">&quot;olivedrab3&quot;</span>)) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),
        <span class="dt">legend.justification=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),
        <span class="dt">legend.background=</span><span class="kw">element_blank</span>())</code></pre></div>
<p><img src="data:image/png;base64,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" /></p>
<div id="adding-antecedent-precip-to-wq-data" class="section level2">
<h2>Adding Antecedent Precip to WQ Data</h2>
<p>The <code>append_weather()</code> function can be used to add columns of antecedent precipitation and weather condition (dry/wet) to a water quality data frame. The following code loads the baseline wq samples for 2010-2011, and the hourly Logan precip dataset. The 48-hour antecedent precipitation is then added to the wq dataframe (column name “Precip.48”), and the weather condition (column name “Weather”) assigned to “Wet”&quot; or “Dry” based on a threshold of 0.25 inches over 48 hours.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wq &lt;-<span class="st"> </span><span class="kw">load_wq</span>(<span class="st">&quot;D:/Dropbox/Work/mystic/db/MysticDB_20160208.accdb&quot;</span>, <span class="dt">projects=</span><span class="st">&quot;BASE&quot;</span>, <span class="dt">sample_types=</span><span class="st">&quot;S&quot;</span>, <span class="dt">exclude_flags=</span><span class="ot">FALSE</span>)
wq &lt;-<span class="st"> </span><span class="kw">filter</span>(wq, <span class="kw">year</span>(Datetime) %in%<span class="st"> </span><span class="dv">2010</span>:<span class="dv">2011</span>)
xls_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;LoganPrecip.xlsx&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;myrwaR&quot;</span>)
prcp &lt;-<span class="st"> </span><span class="kw">load_precip_from_xls</span>(<span class="dt">path =</span> xls_path, <span class="dt">as.type =</span> <span class="st">&quot;dataframe&quot;</span>)

wq_prcp &lt;-<span class="st"> </span><span class="kw">append_weather</span>(wq, prcp, <span class="dt">period =</span> <span class="dv">48</span>, <span class="dt">precip.threshold =</span> <span class="fl">0.25</span>, <span class="dt">precip.name =</span> <span class="st">&quot;Precip&quot;</span>)</code></pre></div>
<pre><code>#&gt; Computing antecedent precip...done
#&gt; Computing DateHour column in wq dataframe...done
#&gt; Merging wq and precip...done</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(wq_prcp)</code></pre></div>
<pre><code>#&gt; 'data.frame':    2651 obs. of  36 variables:
#&gt;  $ DateHour           : POSIXct, format: &quot;2010-01-20 06:00:00&quot; &quot;2010-01-20 06:00:00&quot; ...
#&gt;  $ LocationID         : Factor w/ 16 levels &quot;ABR006&quot;,&quot;ABR028&quot;,..: 10 10 2 2 3 10 10 3 2 3 ...
#&gt;  $ VisitID            : int  1649 1649 1650 1650 1651 1649 1649 1651 1650 1651 ...
#&gt;  $ ID                 : int  14171 14173 14175 14179 14187 14167 14169 14184 14180 14183 ...
#&gt;  $ CharacteristicID   : Factor w/ 17 levels &quot;DO&quot;,&quot;DO_SAT&quot;,..: 12 15 3 15 15 1 3 8 16 3 ...
#&gt;  $ ResultValue        : num  3.83e+03 8.39e-02 9.33e+02 6.16e-02 6.49e-02 ...
#&gt;  $ Units              : Factor w/ 8 levels &quot;%&quot;,&quot;CFU/100ml&quot;,..: 8 4 5 4 4 4 5 4 4 5 ...
#&gt;  $ Qualifier          : Factor w/ 3 levels &quot;&quot;,&quot;&lt;&quot;,&quot;&gt;&quot;: NA NA NA NA NA NA NA NA 2 NA ...
#&gt;  $ FlagID             : Factor w/ 7 levels &quot;E&quot;,&quot;F&quot;,&quot;k&quot;,&quot;K&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ MethodID           : int  32 50 5 50 50 23 5 36 27 5 ...
#&gt;  $ ResultComment      : Factor w/ 72 levels &quot;&quot;,&quot; &quot;,&quot;(bacteria) perservative (blue pill) fell out of one of bottles&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ SampleDepth        : num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ UniqueID           : Factor w/ 2204 levels &quot;200007120603_UPL001_BASE_S&quot;,..: 1166 1166 1167 1167 1168 1166 1166 1168 1167 1168 ...
#&gt;  $ Datetime           : POSIXct, format: &quot;2010-01-20 06:08:00&quot; &quot;2010-01-20 06:08:00&quot; ...
#&gt;  $ ProjectID          : Factor w/ 1 level &quot;BASE&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ SampleTypeID       : Factor w/ 1 level &quot;S&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ HasFlow            : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ SampleDepthType    : Factor w/ 0 levels: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ Comment            : Factor w/ 1261 levels &quot;&quot;,&quot; &quot;,&quot; cooler temp - cold, had snow in it&quot;,..: 1022 1022 954 954 287 1022 1022 287 954 287 ...
#&gt;  $ LocationDescription: Factor w/ 16 levels &quot;&quot;,&quot;Aberjona River at Salem Street in Woburn; downstream side of the bridge&quot;,..: 10 10 4 4 2 10 10 2 4 2 ...
#&gt;  $ WaterBodyID        : Factor w/ 12 levels &quot;Aberjona River&quot;,..: 7 7 1 1 1 7 7 1 1 1 ...
#&gt;  $ MunicipalityID     : Factor w/ 11 levels &quot;Arlington&quot;,&quot;Belmont&quot;,..: 1 1 10 10 11 1 1 11 10 11 ...
#&gt;  $ Latitude           : num  42.4 42.4 42.5 42.5 42.5 ...
#&gt;  $ Longitude          : num  -71.1 -71.1 -71.1 -71.1 -71.1 ...
#&gt;  $ LocationTypeID     : int  22 22 22 22 22 22 22 22 22 22 ...
#&gt;  $ LocationMethod     : Factor w/ 1 level &quot;GPS-Unspecified&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ CoordinateSystem   : Factor w/ 1 level &quot;WGS84&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ InWatershed        : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ RegionalID         : Factor w/ 2 levels &quot;Lower Mystic River&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ WaterType          : Factor w/ 2 levels &quot;Fresh&quot;,&quot;Saline&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ Owner              : Factor w/ 1 level &quot;&quot;: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ StaffGage          : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ County             : Factor w/ 2 levels &quot;Middlesex&quot;,&quot;Suffolk&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ CatchmentArea_Sqmi : num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ Precip.48          : num  0.44 0.44 0.44 0.44 0.44 0.44 0.44 0.44 0.44 0.44 ...
#&gt;  $ Weather            : Factor w/ 2 levels &quot;Dry&quot;,&quot;Wet&quot;: 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
</div>
</div>
<div id="storm-events" class="section level1">
<h1>Storm Events</h1>
<p>Identify individual storm events can also be useful for analyzing water quality. The <code>myrwaR</code> package includes two functions related to events. The first function <code>assign_precip_events()</code> analyzes an hour precipitation timeseries and assigns a unique ID to each dry and wet event. The second function takes that result and generates a summary table listing the properties of each event.</p>
<div id="identify-events" class="section level2">
<h2>Identify Events</h2>
<p>For this example, we’ll start with the hourly precipitation for March 2010. The plot below shows some small and some large events.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_032010 &lt;-<span class="st"> </span>dplyr::<span class="kw">filter</span>(prcp, lubridate::<span class="kw">year</span>(Datetime)==<span class="dv">2010</span>, <span class="kw">month</span>(Datetime)==<span class="dv">3</span>)
<span class="kw">ggplot</span>(prcp_032010, <span class="kw">aes</span>(Datetime, Precip)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Precip (in/hr)&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAGACAMAAAByRC0tAAAAh1BMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6AGY6OgA6OmY6OpA6ZmY6kLY6kNtmAABmADpmAGZmOgBmOpBmkJBmtrZmtv9/f3+QOgCQOjqQOmaQkDqQtpCQ2/+2ZgC225C2/9u2///bkDrbtrbb/7bb///l5eX6+vr/tmb/25D//7b//9v///9q7Kf4AAAACXBIWXMAAA7DAAAOwwHHb6hkAAARH0lEQVR4nO2dCX/aOB5A1U6TdrazSWePJHuEbphJAkTf//Mtkg8E6C/Jlswhvzf9EY4hzzavwgemSgNkoM49AXDdEBBkQUCQBQFBFgQEWRAQZDE2oEeYObkB+e9+G/O73sc8aYzpZKJRputadtkBvXt58989AScz1ScqYmIEmlLECBSFgIqbrmvZEdCUIgKKQkDFTde17AhoShEBRSGg4qbrWnYENKWIgKIQUHHTdS07AppSREBRCKi46bqWHQFNKSKgKARU3HRdy46AphSVCij+6hCQJiBZREBJEJAkIqAkCEgSEVASBCSJCCgJApJEBJQEAUkiAkqCgCQRASVBQJKIgJIgIElEQEkQkCQioCQISBIRUBIEJIkIKAkCkkQElAQBSSICSoKAJBEBJUFAkoiAkiAgSVRBQB9P6vNLd2P9rb9KQMVNdQa0uDF/uhufCWg6U5UBbX4878ad1S+MQBOaqgzIxGMiMnz8+2cTkNry+DYD1OwnQGZEQMu7ua0DqbEiRqAOJ6DN318JaCqTIKoqoMXD7LbCCEgWDV6J3tybVR/1cPD8ApNGQA1VBrS/Gc8INJVJEFUQ0HbgMTt/FnfmBgFNZRJEFQQkQUBFTYKIgJIgIC2ICCgJAtKCiICSICAtiAgoCQLSgoiAkiAgLYgIKAkC0oKIgJIgIC2ICCgJAtKCiICSICAtiAgoCQLSgoiAkiAgLYgIKAkC0oKIgJIgIC2ICCgJAtKCiICSICAtiAgoCQLSgoiAkiAgLYgIKAkC0oKIgJIgIC2ICCgJAtKCiICSICAtiAgoCQLSgoiAkiAgLYgIKAkC0oKIgJIgIC2ICCgJAtKCiICSICAtiGoO6N3Lm//uCTiFSZ1K9C6I1MlMg2EESoARSBYRUAIEJIsIKAECkkUElAABySICSoCAZBEBJUBAsoiAEphZQEEbAY0QEZAsIqAECEgWEVAC5w5IEVASBKT9IgJKg4C0X0RAaRCQ9osIKA0C0n4RAaVBQNovIqA0CEj7RQSUBgFpv4iA0iAg7RcRUBoEpP0iAkqDgLRfdIqAlPdqXERACdgXkIC8IgJKgIBkEQElQECyiIASICBZREAJEJAsIqAECEgWEVACMwhIEdCEonkFFLYR0AgRAckiAkqAgGRRakAfT+rzS3N1pdSn58Pny5OWDgFZ6gxocWP+GNZfn/Wqi4mAypq0V1RBQJsfz3r97cW9uf98edLSISBLlQGZeHbV6OWXV2tS6vFtBihVvd9RDLONCWh9O691IKUZgUTRuBFoXutABBQQjQtoXutABBQQsRIdh4ACouGb8ebta/399eD58qSlQ0CWswcUjGFsQJt7uyNxcbfdBFP9PkUCKmuy1BmQBAGVNFkISBPQSJOFgDQBjTRZCEgT0EiThYA0AY00WQhIE9BIk4WANAGNNFkISBPQSJOlkoBWquEhPA0EVNJkqSGgzb1qjlu4H2X1QkAlTZYKAtr8/iLeEp4vT1o6BGSpIKABEFBJk6WOgD6e7pKmgYBKmix1BLS5j6w9HzxfnrR0CMhSR0DOp1aDEFBJk8UfUKShiwtoux3WEOmIgEqaLHUElAoBlTRZCEgT0EiTpZKAPp54C2shoIBIDGjBSnQHAQVE8ko0+4E6CCggYj9QHAIKiOQ90TdJ00BAJU2WOgLS69ukIYiASposFQTU70VkK8xAQAER+4HiEFBAJIxAadvwmoDKmiwVBNS8iSVFREAlTZYqAjIkRfT47uXNf/cEnMCktv+dcJaORUq920mYztTMYncxxBVZB4q+mTEClTRZzjECtaOOcq4niliJjkNAAREHU+MQUEDEwdQ4BBQQcTA1DgEFRBxMjUNAAREHU0Oo9rILaPCmxnwD0qvYWfH7zxcnbQAEZKkjIM7KMBBQVMR+oBAEFBURUAgCiooIKAQBRUXCxznuWAcyEFBUxAgU4nICin2/AgHpqwho6GKaaUB8Q1kLAUVFfEdiCAKKiviW1hAEFBWxDhSCgKIiAgpBQFERAYW4jIDU6QJSmoBKiggoKiKgEAQUFRFQiIOAwos2y+RQS0D2aNiX16P7/c8XJ20AFxeQIqCoSN4P9Ol5e7m0lwEIqIjJpY6APp6aPYiLyBhEQEVMLnUEtPnRDD2xL6wnoCImlzoC6kagJSMQAYVEkbMylrM+FkZAcVH0rIz2Q4nOUfn1rXOIlYCKmFzqCOiQxY35YzDnrK76jTMCKmJyqTIgs069/maHoNV2rahbQyKgQiaXKgMy8XQbZto9c56AiphcKgjo+KyMg4CabTPz8ONbxSjV/HhTb/tXTj0ZqpuUyRTNnBmLGjaXo0ag5W7nECNQEZPLmUcgNf1bmHt8g4CKmFxqCcgcxFip9mumnJVod/whoEIml0oCag6Cbe7bszN2m/Hrr+7x1boDahcrAcmi2DeUdcfCtivV5triTi/2TtYgoCImlzoC+nhq3ryWsz6YSkBRkfgW1hwFW99GvmuTgIqYXCoJyB7yUrHPkxFQGZNLLQGlQUBFTC4EpAloqMmlloC2211fXhexrxsnoCIml0oCWn16Xn55jX5hPQEVMbnUEZDZjDeHTGe6Ge/ugp5rQH7jkB2JJqCZfqiegHID6kagmZ7WQ0C5AbXrQHP9UD0BZQfUfKx+rjsSLyug2IrtSFE4ICFZ9gMliQgoN6DuYGoMAso0HVNHQDP/B+cOA1JdQAMLmm9A0e33g+eLkzYAArLUEdDM/60MAmIlOktEQASUJWrDIaCoSAhoGf+O+v3ni5M2AAKy1BCQOfNrfZtSEAFlmo6pIKBmJ1Dsu6X2ni9O2gAuOSBFQH6RcG68GXySNuRnF9Cwgq4vIKUJqICIgAgoS0RABJQlmmdAShNQIREBZQa0/w2bAQgo03RMBQEN4PHdy5v/7gmYxqTai/bnthsjaq5MzdEcGe37FN6dqfn9qv/P3EgzcijDCyMQx8KyRAREQFkiAiKgHJFdeIqAEkQE5IOACChLREAElCNSbkCKgEIiAvIw34DasdfeRUCjRQSkCShHRECagHJEBKQJKEdEQJqAckQEpAkoR6RUG44/oAHL6koCameKgAqJ1G5nyO4vJwF5RQTkgYA0AeWICEgTUI4oFFBzUcrkg4A0AaWafBCQJqBUkw8C0gSUavJxOEdq8oAUAZUV7QekCCggIiAPBKQJKEdEQJqAckS+gFTlAbUr0gRUQkRAmoByRASkCShHpPrPbfS9EJAgIiAPql98hwHpcwSkCSgNArLUGdDHk/NNQetv/VUCyjL5qDOgxY3507C5/0xAZUw+fAFFX6BLD2jz47kfd5bqN0agQiYfVQZk4jERGf545S2slMlH9QH160DmKxQf3ypEbf+o9ppqrjYX9g7VPnbKqbF/2osJDP3M9Vf7JRAjJyA3wAOqHYGavzbFTD48I1B3KYuvcgRyny9M2iAIyFJlQO5K9OwCslcIyC8asxk/i4C6azMIqPvM5aQBbe7tjsSF/cfACaiUyUedAUkQUJbJBwFpAko1+ZADCogJSF9WQP217igUAflFBOSBgGQZASWIwgGd4VCGJqAULjsgRUA+EQF5ICBZRkAJIgKSZQSUIBICUpUH1CsIKFMUCWjAwrqSgJpLAiolIiBZRkBxkXKvElBYREDHEJCWZQQUFxGQlmUEFBfNLCBFQIVF3oDczXcC2kFAxxCQc3dMREDHEJBzd0xEQMcQUH8zLiKgYwhIE1COiIA0AeWI3IDUPANSBJQhcpfF7jVzXj0C2kFAxxAQAWWJCIiAskQEREBZIgIioCwRAZ0yoHcvb+/bDWD/Q4V5K/8r3QnfzYUzP9PO2eEcqf4ydZGmTl9jUp2gV5jXTiX+lslGIKngAJc4Au1uvJ19BFIB854odfrEEcju8zrzWxgBJZi8EJAmoESTFwLSBJRo8pIdUPJ5a3sB9e0QUK6IgAgoS0RABBQVhSYuIaDUebuCgBQBDWZIQDvRLALSBJQmIiBNQK1pOATkmAhoOLkBpb9E5wgofckbk/ORSwIaICIgTUCtaTgEtDNdckDJi7mFgBqRd3KaV7R0QOqSAxr8S08aUGDahIDc/+P0AekTBdReI6CIiIA0AbWm4RBQZyKgCQISHrmWgEL/15FJuafeEtAAEQFpAmpNwyGgznS5AfWbhDJHj54woNB6wsUE1C5DAhK44oCSF9fFB6SFgLT0WwhIE9DOREAEdCiqKaDwbyWgiKg/S3TvZkxEQMMgoAMRAQ2DgA5EswnoeFNYKXHjUWZMQPJXBzSPxkUnC0gdvKyqvyaIQpUdm4IBeV8NAtIEtDO5Q83hbyUgWU1Arel0AX08qc8vR1cJKAIBdSxuzJ/Dq2JAau+H/3/xBLS3wNIYEVD4w33S/ScPqFk/cQLqLnwv7LiA9v6aHwUUFrUkBrT58azX314OrmoCikBALaYYU87+VU1AEQioxRuQWWd5fAuhBjL8GWMJmIJzNHLGcqaxd+7EIf+gqdv9YvOsg3l8c0XSkphoBLrqL9ksJyryeaDJREWWHQFNKSKgjqEr0de1ECYTEVDPwM3461oIk4kIqGdzb/ceLu76q/vPLzBpBHRi0UkDkiCg4qbrWnYENKWIgKIQUHHTdS07AppSREBRCKi46bqWHQFNKSKgKARU3HRdy46AphQRUBQCKm66rmWXHZAfJdxfnpOZ6hOVMWUGJFD4112CqT5RURMBzU9EQCc11Se65IBgbhAQZEFAkAUBQRYEBFlkBLS+tZ9w3dzvPuja0Z9Gv/sUfg5x0/pWfXr2PLOcqJ2XrUh9eZ1SZAwP/Y/TmDLmKCegr7+aOVz9chxJ9/l7/ytR3rS5f9DLAqqAqJ2X1c3xs4qKzKysPj23P05iutPL8XOVE9C3/9xtfyz+cTxp7RlAS/VbmREoZto/Z20KUTcv5uyCAsii1XY0+Hh6aH+cwJS57LIC+vn9VW9+/7mdgpVS6kav//I3Owx00/THa6G3sJjJLOpViXcWUdTOy8e/CgwKYZFuxobdj4lN5wzof9vFubrZTkE7Gq5vH9pHumkqFVDMtF0VKtBPQNS7fi2zshUS6WUzL8vJZ8ko7Nv/+NWtrIBelnd68bA7c3X99bl7pHBAEZN9Hy+xDiSKWpe5ufl9YlE7JyVmKMW0XYn+6/g3y7yA1t///N2ugJgV+m3bbS4TBBQ2lVsHkkR6Ny9Ti5bNELcsMdIlmbJmKS+gzY//fjfrBvYv5o9ndxE314sFFDYVDEgQ6eIBSaKi40+KSWe9THkB6YW6Mz9X20lZOG33p9EXCyhs+ngq9hYmiZoHzb3r7yXW1iVR+wbjvM9MbDJ/HxZn2ox/sbsqtj+367DmfbRf2v1p9OUCCptK7UiURe28LJUqMTTIooX9WqeH9scJTGbb7Dw7EgEICDIhIMiCgCALAoIsCAiyICDIgoAEmr0kB3tiVg/7N4ocL79uCEhgYXeurW/dfbR7vRCPhYAEmoD2PxVIQMcQkEAb0MeTGYIW9s2s/Tz0cnvjrrnx572595/32zu6zzA3j84HAhJoA7I/zbFG89EHO+iYK+vbO3tjYwPa3rE0R8jM4dzu0dlAQAJdQNsq7Oc3zOf4mmZMHavPL7uA7nR38dA/etZpPyUEJOAEZH6szBvU7lQJ20oX0IPuL/pHzzjlp4WABNy3MPMZjp/tCLRq/x0tISDl2/qvGQIScFai+0T2TtYKjEBzgoAEnM14u0qzUg99MxZvQPPbticggW5H4l03+Ki7ZgXafhJ90ZzReRRQ/+i5J/9kEJCAeyhjaU5mMFUsuv1A9p/A6vYDuQH1j84FAoIsCAiyICDIgoAgCwKCLAgIsiAgyIKAIAsCgiwICLIgIMji/2WDTQow3615AAAAAElFTkSuQmCC" /></p>
<p>The <code>assign_precip_events()</code> function can then identify and assign unique IDs to each event.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_032010_evt &lt;-<span class="st"> </span><span class="kw">assign_precip_events</span>(<span class="dt">x =</span> prcp_032010)
<span class="kw">str</span>(prcp_032010_evt)</code></pre></div>
<pre><code>#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    744 obs. of  4 variables:
#&gt;  $ Datetime : POSIXct, format: &quot;2010-03-01 00:00:00&quot; &quot;2010-03-01 01:00:00&quot; ...
#&gt;  $ Precip   : num  0 0.01 0.03 0.05 0.05 0.05 0.03 0.03 0.03 0.02 ...
#&gt;  $ EventID  : num  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ EventType: chr  &quot;Wet&quot; &quot;Wet&quot; &quot;Wet&quot; &quot;Wet&quot; ...</code></pre>
<p>The result from this function is a copy of the original timeseries with additional columns for:</p>
<ul>
<li><code>EventID</code>: unique ID for the event</li>
<li><code>EventType</code>: type of event (“Wet” or “Dry”)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(prcp_032010_evt, <span class="kw">aes</span>(Datetime, Precip, <span class="dt">group=</span>EventID, <span class="dt">color=</span><span class="kw">interaction</span>(EventType, EventID))) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="kw">scale_color_discrete</span>(<span class="st">&quot;EventType.EventID&quot;</span>) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Precip (in/hr)&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /></p>
<p>This figure shows the hourly and cumulative precipitation during each wet event.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(prcp_032010_evt, EventType ==<span class="st"> &quot;Wet&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(EventID) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">PrecipCumsum=</span><span class="kw">cumsum</span>(Precip)) %&gt;%
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Datetime)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>Precip, <span class="dt">color=</span><span class="st">&quot;Precip&quot;</span>)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y=</span>PrecipCumsum, <span class="dt">color=</span><span class="st">&quot;PrecipCumsum&quot;</span>)) +
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="ot">NULL</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="dt">Precip=</span><span class="st">&quot;Hourly Precip&quot;</span>, <span class="dt">PrecipCumsum=</span><span class="st">&quot;Cumulative Precip&quot;</span>),
                     <span class="dt">values=</span><span class="kw">c</span>(<span class="dt">Precip=</span><span class="st">&quot;steelblue&quot;</span>, <span class="dt">PrecipCumsum=</span><span class="st">&quot;orangered&quot;</span>)) +
<span class="st">  </span><span class="kw">scale_x_datetime</span>(<span class="dt">labels=</span>scales::<span class="kw">date_format</span>(<span class="st">&quot;%b %d %H:%M&quot;</span>)) +
<span class="st">  </span><span class="kw">ylim</span>(<span class="dv">0</span>, <span class="ot">NA</span>) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Precip (in/hr) / Cumul Precip (in)&quot;</span>) +
<span class="st">  </span><span class="kw">facet_wrap</span>(~EventID, <span class="dt">scales=</span><span class="st">&quot;free&quot;</span>, <span class="dt">labeller =</span> <span class="st">&quot;label_both&quot;</span>, <span class="dt">ncol =</span> <span class="dv">2</span>) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">hjust=</span><span class="dv">1</span>, <span class="dt">vjust=</span><span class="fl">0.5</span>))</code></pre></div>
<p><img src="data:image/png;base64,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" /></p>
</div>
<div id="summarize-events" class="section level2">
<h2>Summarize Events</h2>
<p>After assigning unique EventIDs to the hourly precipitation timeseries, the <code>precip_event_summary()</code> function can be used to create a summary of these events listing various characteristics such as the start/end times, the duration, total precipitation, peak precipitation rate, etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_032010_evt_summary &lt;-<span class="st"> </span><span class="kw">precip_event_summary</span>(prcp_032010_evt)
<span class="kw">str</span>(prcp_032010_evt_summary)</code></pre></div>
<pre><code>#&gt; 'data.frame':    10 obs. of  9 variables:
#&gt;  $ EventID            : num  1 2 3 4 5 6 7 8 9 10
#&gt;  $ EventType          : chr  &quot;Wet&quot; &quot;Dry&quot; &quot;Wet&quot; &quot;Dry&quot; ...
#&gt;  $ StartDatetime      : POSIXct, format: &quot;2010-03-01 00:00:00&quot; &quot;2010-03-01 11:00:00&quot; ...
#&gt;  $ EndDatetime        : POSIXct, format: &quot;2010-03-01 10:00:00&quot; &quot;2010-03-13 10:00:00&quot; ...
#&gt;  $ TotalDuration      : int  11 288 58 160 32 55 5 66 53 16
#&gt;  $ PeakIntensity      : num  0.05 0.04 0.4 0 0.43 0.01 0.05 0 0.34 0
#&gt;  $ MeanIntensity      : num  0.028182 0.000556 0.120345 0 0.071875 ...
#&gt;  $ TotalDepth         : num  0.31 0.16 6.98 0 2.3 0.02 0.17 0 4.88 0
#&gt;  $ AntecedentDryPeriod: num  NA NA 288 NA 160 NA 55 NA 66 NA</code></pre>
<p>Note that the data frame returned from this function includes both the dry and wet events. To summarize only the wet events, simply filter on the <code>EventType</code> column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(prcp_032010_evt_summary, EventType==<span class="st">&quot;Wet&quot;</span>) %&gt;%
<span class="st">  </span>summary</code></pre></div>
<pre><code>#&gt;     EventID   EventType         StartDatetime                
#&gt;  Min.   :1   Length:5           Min.   :2010-03-01 00:00:00  
#&gt;  1st Qu.:3   Class :character   1st Qu.:2010-03-13 11:00:00  
#&gt;  Median :5   Mode  :character   Median :2010-03-22 13:00:00  
#&gt;  Mean   :5                      Mean   :2010-03-18 11:00:00  
#&gt;  3rd Qu.:7                      3rd Qu.:2010-03-26 04:00:00  
#&gt;  Max.   :9                      Max.   :2010-03-29 03:00:00  
#&gt;                                                              
#&gt;   EndDatetime                  TotalDuration  PeakIntensity  
#&gt;  Min.   :2010-03-01 10:00:00   Min.   : 5.0   Min.   :0.050  
#&gt;  1st Qu.:2010-03-15 20:00:00   1st Qu.:11.0   1st Qu.:0.050  
#&gt;  Median :2010-03-23 20:00:00   Median :32.0   Median :0.340  
#&gt;  Mean   :2010-03-19 17:48:00   Mean   :31.8   Mean   :0.254  
#&gt;  3rd Qu.:2010-03-26 08:00:00   3rd Qu.:53.0   3rd Qu.:0.400  
#&gt;  Max.   :2010-03-31 07:00:00   Max.   :58.0   Max.   :0.430  
#&gt;                                                              
#&gt;  MeanIntensity       TotalDepth    AntecedentDryPeriod
#&gt;  Min.   :0.02818   Min.   :0.170   Min.   : 55.00     
#&gt;  1st Qu.:0.03400   1st Qu.:0.310   1st Qu.: 63.25     
#&gt;  Median :0.07187   Median :2.300   Median :113.00     
#&gt;  Mean   :0.06930   Mean   :2.928   Mean   :142.25     
#&gt;  3rd Qu.:0.09208   3rd Qu.:4.880   3rd Qu.:192.00     
#&gt;  Max.   :0.12034   Max.   :6.980   Max.   :288.00     
#&gt;                                    NA's   :1</code></pre>
</div>
<div id="adding-events-to-a-wq-dataset" class="section level2">
<h2>Adding Events to a WQ Dataset</h2>
<p>The precipitation events dataframe can be joined to the water quality dataset based on the date/time stamp rounded to the nearest hour. For example, the following code loads the baseline wq and precipitation datasets for 2010-2011, identifies the precipitation events, and then joins this information with the wq dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wq &lt;-<span class="st"> </span><span class="kw">load_wq</span>(<span class="st">&quot;D:/Dropbox/Work/mystic/db/MysticDB_20160208.accdb&quot;</span>, <span class="dt">projects=</span><span class="st">&quot;BASE&quot;</span>, <span class="dt">sample_types=</span><span class="st">&quot;S&quot;</span>, <span class="dt">exclude_flags=</span><span class="ot">FALSE</span>)
wq &lt;-<span class="st"> </span><span class="kw">filter</span>(wq, <span class="kw">year</span>(Datetime) %in%<span class="st"> </span><span class="dv">2010</span>:<span class="dv">2011</span>)

xls_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;LoganPrecip.xlsx&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;myrwaR&quot;</span>)
prcp &lt;-<span class="st"> </span><span class="kw">load_precip_from_xls</span>(<span class="dt">path =</span> xls_path, <span class="dt">as.type =</span> <span class="st">&quot;dataframe&quot;</span>)
prcp &lt;-<span class="st"> </span>dplyr::<span class="kw">filter</span>(prcp, <span class="kw">year</span>(Datetime) %in%<span class="st"> </span><span class="dv">2010</span>:<span class="dv">2010</span>)</code></pre></div>
<p>We then assign the events to the hourly precipitation dataset</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_evt &lt;-<span class="st"> </span><span class="kw">assign_precip_events</span>(<span class="dt">x =</span> prcp)

<span class="kw">summary</span>(prcp_evt)</code></pre></div>
<pre><code>#&gt;     Datetime                       Precip            EventID     
#&gt;  Min.   :2010-01-01 00:00:00   Min.   :0.000000   Min.   : 0.00  
#&gt;  1st Qu.:2010-04-02 05:45:00   1st Qu.:0.000000   1st Qu.:22.00  
#&gt;  Median :2010-07-02 11:30:00   Median :0.000000   Median :50.00  
#&gt;  Mean   :2010-07-02 11:30:00   Mean   :0.005271   Mean   :47.81  
#&gt;  3rd Qu.:2010-10-01 17:15:00   3rd Qu.:0.000000   3rd Qu.:73.00  
#&gt;  Max.   :2010-12-31 23:00:00   Max.   :1.600000   Max.   :98.00  
#&gt;   EventType        
#&gt;  Length:8760       
#&gt;  Class :character  
#&gt;  Mode  :character  
#&gt;                    
#&gt;                    
#&gt; </code></pre>
<p>Finally, add a new column <code>Datehour</code> to the <code>wq</code> data frame which is the <code>Datetime</code> column rounded to the nearest hour, and then use that column to join the <code>prcp_evt</code> data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wq &lt;-<span class="st"> </span><span class="kw">mutate</span>(wq, <span class="dt">Datehour =</span> <span class="kw">floor_date</span>(Datetime, <span class="dt">unit =</span> <span class="st">&quot;hour&quot;</span>))
wq_prcp_evt &lt;-<span class="st"> </span><span class="kw">left_join</span>(wq, prcp_evt, <span class="dt">by=</span><span class="kw">c</span>(<span class="dt">Datehour=</span><span class="st">&quot;Datetime&quot;</span>))
<span class="kw">str</span>(wq_prcp_evt)</code></pre></div>
<pre><code>#&gt; 'data.frame':    2651 obs. of  37 variables:
#&gt;  $ LocationID         : Factor w/ 16 levels &quot;ABR006&quot;,&quot;ABR028&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ VisitID            : int  1748 1656 1748 1748 1748 1656 1656 1748 1890 1748 ...
#&gt;  $ ID                 : int  15019 14221 15020 15022 15021 14220 14224 15018 16115 15017 ...
#&gt;  $ CharacteristicID   : Factor w/ 17 levels &quot;DO&quot;,&quot;DO_SAT&quot;,..: 12 12 13 16 15 8 16 8 1 3 ...
#&gt;  $ ResultValue        : num  9.41e+02 2.59e+03 1.50e+01 5.00 3.18e-02 ...
#&gt;  $ Units              : Factor w/ 8 levels &quot;%&quot;,&quot;CFU/100ml&quot;,..: 8 8 3 4 4 4 4 4 4 5 ...
#&gt;  $ Qualifier          : Factor w/ 3 levels &quot;&quot;,&quot;&lt;&quot;,&quot;&gt;&quot;: NA NA NA 2 NA NA NA NA NA NA ...
#&gt;  $ FlagID             : Factor w/ 7 levels &quot;E&quot;,&quot;F&quot;,&quot;k&quot;,&quot;K&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ MethodID           : int  32 32 67 27 50 36 27 36 23 5 ...
#&gt;  $ ResultComment      : Factor w/ 72 levels &quot;&quot;,&quot; &quot;,&quot;(bacteria) perservative (blue pill) fell out of one of bottles&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ SampleDepth        : num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ UniqueID           : Factor w/ 2204 levels &quot;200007120603_UPL001_BASE_S&quot;,..: 1294 1172 1294 1294 1294 1172 1172 1294 1469 1294 ...
#&gt;  $ Datetime           : POSIXct, format: &quot;2010-09-15 06:19:00&quot; &quot;2010-01-20 07:19:00&quot; ...
#&gt;  $ ProjectID          : Factor w/ 1 level &quot;BASE&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ SampleTypeID       : Factor w/ 1 level &quot;S&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ HasFlow            : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ SampleDepthType    : Factor w/ 0 levels: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ Comment            : Factor w/ 1261 levels &quot;&quot;,&quot; &quot;,&quot; cooler temp - cold, had snow in it&quot;,..: 270 856 270 270 270 856 856 270 604 270 ...
#&gt;  $ LocationDescription: Factor w/ 16 levels &quot;&quot;,&quot;Aberjona River at Salem Street in Woburn; downstream side of the bridge&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
#&gt;  $ WaterBodyID        : Factor w/ 12 levels &quot;Aberjona River&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ MunicipalityID     : Factor w/ 11 levels &quot;Arlington&quot;,&quot;Belmont&quot;,..: 10 10 10 10 10 10 10 10 10 10 ...
#&gt;  $ Latitude           : num  42.4 42.4 42.4 42.4 42.4 ...
#&gt;  $ Longitude          : num  -71.1 -71.1 -71.1 -71.1 -71.1 ...
#&gt;  $ LocationTypeID     : int  22 22 22 22 22 22 22 22 22 22 ...
#&gt;  $ LocationMethod     : Factor w/ 1 level &quot;GPS-Unspecified&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ CoordinateSystem   : Factor w/ 1 level &quot;WGS84&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ InWatershed        : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ RegionalID         : Factor w/ 2 levels &quot;Lower Mystic River&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ WaterType          : Factor w/ 2 levels &quot;Fresh&quot;,&quot;Saline&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ Owner              : Factor w/ 1 level &quot;&quot;: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ StaffGage          : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ County             : Factor w/ 2 levels &quot;Middlesex&quot;,&quot;Suffolk&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ CatchmentArea_Sqmi : num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ Datehour           : POSIXct, format: &quot;2010-09-15 06:00:00&quot; &quot;2010-01-20 07:00:00&quot; ...
#&gt;  $ Precip             : num  0 0 0 0 0 0 0 0 NA 0 ...
#&gt;  $ EventID            : num  68 4 68 68 68 4 4 68 NA 68 ...
#&gt;  $ EventType          : chr  &quot;Dry&quot; &quot;Dry&quot; &quot;Dry&quot; &quot;Dry&quot; ...</code></pre>
<p>We can also add the event summary data to the <code>wq</code> data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prcp_evt_summary &lt;-<span class="st"> </span><span class="kw">precip_event_summary</span>(prcp_evt)
wq_prcp_evt &lt;-<span class="st"> </span><span class="kw">left_join</span>(wq_prcp_evt, prcp_evt_summary, <span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;EventID&quot;</span>, <span class="st">&quot;EventType&quot;</span>))
<span class="kw">str</span>(wq_prcp_evt)</code></pre></div>
<pre><code>#&gt; 'data.frame':    2651 obs. of  44 variables:
#&gt;  $ LocationID         : Factor w/ 16 levels &quot;ABR006&quot;,&quot;ABR028&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ VisitID            : int  1748 1656 1748 1748 1748 1656 1656 1748 1890 1748 ...
#&gt;  $ ID                 : int  15019 14221 15020 15022 15021 14220 14224 15018 16115 15017 ...
#&gt;  $ CharacteristicID   : Factor w/ 17 levels &quot;DO&quot;,&quot;DO_SAT&quot;,..: 12 12 13 16 15 8 16 8 1 3 ...
#&gt;  $ ResultValue        : num  9.41e+02 2.59e+03 1.50e+01 5.00 3.18e-02 ...
#&gt;  $ Units              : Factor w/ 8 levels &quot;%&quot;,&quot;CFU/100ml&quot;,..: 8 8 3 4 4 4 4 4 4 5 ...
#&gt;  $ Qualifier          : Factor w/ 3 levels &quot;&quot;,&quot;&lt;&quot;,&quot;&gt;&quot;: NA NA NA 2 NA NA NA NA NA NA ...
#&gt;  $ FlagID             : Factor w/ 7 levels &quot;E&quot;,&quot;F&quot;,&quot;k&quot;,&quot;K&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ MethodID           : int  32 32 67 27 50 36 27 36 23 5 ...
#&gt;  $ ResultComment      : Factor w/ 72 levels &quot;&quot;,&quot; &quot;,&quot;(bacteria) perservative (blue pill) fell out of one of bottles&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ SampleDepth        : num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ UniqueID           : Factor w/ 2204 levels &quot;200007120603_UPL001_BASE_S&quot;,..: 1294 1172 1294 1294 1294 1172 1172 1294 1469 1294 ...
#&gt;  $ Datetime           : POSIXct, format: &quot;2010-09-15 06:19:00&quot; &quot;2010-01-20 07:19:00&quot; ...
#&gt;  $ ProjectID          : Factor w/ 1 level &quot;BASE&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ SampleTypeID       : Factor w/ 1 level &quot;S&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ HasFlow            : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ SampleDepthType    : Factor w/ 0 levels: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ Comment            : Factor w/ 1261 levels &quot;&quot;,&quot; &quot;,&quot; cooler temp - cold, had snow in it&quot;,..: 270 856 270 270 270 856 856 270 604 270 ...
#&gt;  $ LocationDescription: Factor w/ 16 levels &quot;&quot;,&quot;Aberjona River at Salem Street in Woburn; downstream side of the bridge&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
#&gt;  $ WaterBodyID        : Factor w/ 12 levels &quot;Aberjona River&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ MunicipalityID     : Factor w/ 11 levels &quot;Arlington&quot;,&quot;Belmont&quot;,..: 10 10 10 10 10 10 10 10 10 10 ...
#&gt;  $ Latitude           : num  42.4 42.4 42.4 42.4 42.4 ...
#&gt;  $ Longitude          : num  -71.1 -71.1 -71.1 -71.1 -71.1 ...
#&gt;  $ LocationTypeID     : int  22 22 22 22 22 22 22 22 22 22 ...
#&gt;  $ LocationMethod     : Factor w/ 1 level &quot;GPS-Unspecified&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ CoordinateSystem   : Factor w/ 1 level &quot;WGS84&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ InWatershed        : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ RegionalID         : Factor w/ 2 levels &quot;Lower Mystic River&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ WaterType          : Factor w/ 2 levels &quot;Fresh&quot;,&quot;Saline&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ Owner              : Factor w/ 1 level &quot;&quot;: NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ StaffGage          : int  1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ County             : Factor w/ 2 levels &quot;Middlesex&quot;,&quot;Suffolk&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ CatchmentArea_Sqmi : num  NA NA NA NA NA NA NA NA NA NA ...
#&gt;  $ Datehour           : POSIXct, format: &quot;2010-09-15 06:00:00&quot; &quot;2010-01-20 07:00:00&quot; ...
#&gt;  $ Precip             : num  0 0 0 0 0 0 0 0 NA 0 ...
#&gt;  $ EventID            : num  68 4 68 68 68 4 4 68 NA 68 ...
#&gt;  $ EventType          : chr  &quot;Dry&quot; &quot;Dry&quot; &quot;Dry&quot; &quot;Dry&quot; ...
#&gt;  $ StartDatetime      : POSIXct, format: &quot;2010-09-13 20:00:00&quot; &quot;2010-01-19 19:00:00&quot; ...
#&gt;  $ EndDatetime        : POSIXct, format: &quot;2010-09-16 19:00:00&quot; &quot;2010-01-25 09:00:00&quot; ...
#&gt;  $ TotalDuration      : int  72 135 72 72 72 135 135 72 NA 72 ...
#&gt;  $ PeakIntensity      : num  0.05 0 0.05 0.05 0.05 0 0 0.05 NA 0.05 ...
#&gt;  $ MeanIntensity      : num  0.000694 0 0.000694 0.000694 0.000694 ...
#&gt;  $ TotalDepth         : num  0.05 0 0.05 0.05 0.05 0 0 0.05 NA 0.05 ...
#&gt;  $ AntecedentDryPeriod: num  NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
